# Test Home Assistant Configuration with Bypass Auth
homeassistant:
  name: Test Home
  latitude: 40.7128
  longitude: -74.0060
  elevation: 10
  unit_system: metric
  time_zone: UTC
  internal_url: "http://localhost:8123"
  country: US
  
  # Bypass authentication for testing
  auth_providers:
    - type: bypass
      trusted_users:
        127.0.0.1: test_user
        172.0.0.0/8: test_user  # Docker network
    - type: homeassistant

# Basic setup
default_config:

# Configure system to skip onboarding
onboarding:

# Enable required components
automation: !include automations.yaml
zone: !include zones.yaml
person: !include persons.yaml

# API for testing - no auth required from trusted networks
api:

# Test helpers
input_boolean:
  test_mode:
    name: Test Mode
    initial: true
  test_water_leak:
    name: Test Water Leak
    initial: false
  test_water_leak_2:
    name: Test Water Leak 2
    initial: false

# Mock devices
light:
  - platform: demo
    name: Living Room
  - platform: demo
    name: Entrance
  - platform: demo
    name: Hallway
  - platform: demo
    name: test_light

climate:
  - platform: demo
    name: Living Room

binary_sensor:
  - platform: template
    sensors:
      water_leak_kitchen:
        friendly_name: "Kitchen Water Leak"
        value_template: "{{ states('input_boolean.test_water_leak') }}"
        device_class: moisture
      test_water_leak:
        friendly_name: "Test Water Leak"
        value_template: "{{ states('input_boolean.test_water_leak_2') }}"
        device_class: moisture

notify:
  - platform: file
    name: test_notifications
    filename: /config/test_notifications.txt
  - platform: file
    name: mobile_app_johns_phone
    filename: /config/mobile_notifications.txt
  - platform: file
    name: mobile_app_test_phone
    filename: /config/test_phone_notifications.txt

# Device tracker for testing
device_tracker:
  - platform: demo

# Logger configuration
logger:
  default: info
  logs:
    homeassistant.components.automation: debug
    homeassistant.components.binary_sensor: debug
    homeassistant.components.notify: debug